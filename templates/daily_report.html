{% comment %} <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>BharatYatra General Report</title>
    <!-- Include Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        h1, h2 {
            text-align: center;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: center;
        }
        th {
            background-color: #f2f2f2;
        }
    </style>
</head>
<body>
    <h1><a href="/">Go to the Home Page !</a></h1>
    <h1><b><u>Admin's Report !</u></b></h1>
    <br><br>

    <h2>New Users</h2>
    <table>
        <thead>
            <tr>
                <th>Date</th>
                <th>No. of New Users</th>
            </tr>
        </thead>
        <tbody>
            {% for user in new_users %}
            <tr>
                <td>{{ user.date_joined__date }}</td>
                <td>{{ user.num_users }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <h2>New Reviews</h2>
    <table>
        <thead>
            <tr>
                <th>Date</th>
                <th>New Reviews</th>
            </tr>
        </thead>
        <tbody>
            {% for review in new_reviews %}
            <tr>
                <td>{{ review.date__date }}</td>
                <td>{{ review.num_reviews }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <h2>New Packages</h2>
    <table>
        <thead>
            <tr>
                <th>Date</th>
                <th>New Packages</th>
            </tr>
        </thead>
        <tbody>
            {% for p in num_packages %}
            <tr>
                <td>{{ p.published_date__date }}</td>
                <td>{{ p.num_packages }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    
    <h2>New Categories</h2>
    <table>
        <thead>
            <tr>
                <th>Date</th>
                <th>New Categories</th>
            </tr>
        </thead>
        <tbody>
            {% for c in num_categories %}
            <tr>
                <td>{{ c.published_date__date }}</td>
                <td>{{ c.num_categories }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</body>
</html> {% endcomment %}






































<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>BharatYatra General Report</title>
    <!-- Include Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        h1, h2 {
            text-align: center;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: center;
        }
        th {
            background-color: #f2f2f2;
        }
        .download-btn {
            text-align: center;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <h1><a href="/">Go to the Home Page !</a></h1>
    <h1><b><u>Admin's Report !</u></b></h1>
    <br><br>

    <div class="download-btn">
        <button id="download-pdf">Download PDF</button>
    </div>

    <h2>New Users</h2>
    <table>
        <thead>
            <tr>
                <th>Date</th>
                <th>No. of New Users</th>
            </tr>
        </thead>
        <tbody>
            {% for user in new_users %}
            <tr>
                <td>{{ user.date_joined__date }}</td>
                <td>{{ user.num_users }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <table>
        <thead>
            <tr>
                <th>
                    Total Users
                </th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>
                    {{total_users}}
                </td>
            </tr>
        </tbody>
    </table>
    <hr style="border:2px solid red;">

    <h2>New Reviews</h2>
    <table>
        <thead>
            <tr>
                <th>Date</th>
                <th>New Reviews</th>
            </tr>
        </thead>
        <tbody>
            {% for review in new_reviews %}
            <tr>
                <td>{{ review.date__date }}</td>
                <td>{{ review.num_reviews }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <table>
        <thead>
            <tr>
                <th>
                    Total Reviews
                </th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>
                    {{total_reviews}}
                </td>
            </tr>
        </tbody>
    </table>
    <hr style="border:2px solid red;">

    <h2>New Packages</h2>
    <table>
        <thead>
            <tr>
                <th>Date</th>
                <th>New Packages</th>
            </tr>
        </thead>
        <tbody>
            {% for p in num_packages %}
            <tr>
                <td>{{ p.published_date__date }}</td>
                <td>{{ p.num_packages }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <table>
        <thead>
            <tr>
                <th>
                    Total Packages
                </th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>
                    {{total_packages}}
                </td>
            </tr>
        </tbody>
    </table>
    <hr style="border:2px solid red;">
    
    <h2>New Categories</h2>
    <table>
        <thead>
            <tr>
                <th>Date</th>
                <th>New Categories</th>
            </tr>
        </thead>
        <tbody>
            {% for c in num_categories %}
            <tr>
                <td>{{ c.published_date__date }}</td>
                <td>{{ c.num_categories }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <table>
        <thead>
            <tr>
                <th>
                    Total Categories
                </th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>
                    {{total_categories}}
                </td>
            </tr>
        </tbody>
    </table>
    <hr style="border:2px solid red;">

    <!-- Include jsPDF library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>
    
    <script>
        console.log("s2");
        document.getElementById('download-pdf').addEventListener('click', function () {
            // Create a new jsPDF instance
            var pdf = new jsPDF();
            
            // Convert the entire HTML body to PDF
            pdf.html(document.body, {
                callback: function (pdf) {
                    // Save the PDF with the name "admin_report.pdf"
                    pdf.save("admin_report.pdf");
                }
            });
        });
    </script>
</body>
</html>
